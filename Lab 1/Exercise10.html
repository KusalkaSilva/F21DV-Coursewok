<!-- 
    Kusalka Silva - H00389705
    F21DV Lab 1
    Date - 21/01/2022 
-->

<!DOCTYPE html> 
<html lang="en"> 
<head> 
    <title>F21DV Lab1 - Exercise </title>
    <script src='https://d3js.org/d3.v7.min.js'></script> 
</head> 
<body> 
    <script> 
 
        let heartfailurecsv = 'https://raw.githubusercontent.com/akmand/datasets/master/heart_failure.csv'; 
        /* 
        age,anaemia,creatinine_phosphokinase,diabetes,ejection_fraction,high_blood_pressure,platelets,serum_creatini
        ne,serum_sodium,sex,smoking,time,DEATH_EVENT 
        75,0,582,0,20,1,265000,1.9,130,1,0,4,1 
        55,0,7861,0,38,0,263358.03,1.1,136,1,0,6,1 
        65,0,146,0,20,0,162000,1.3,129,1,1,7,1 
        50,1,111,0,20,0,210000,1.9,137,1,0,7,1 
        */ 
         
        // default array to hold the number of patients within the age range ['1-30', '31-40', '41-60', '61-100']
        // default count is set as 0 for all 4 age ranges
        var age = [0, 0, 0, 0];


        d3.csv(heartfailurecsv).then(function(data) { 

            // reads the csv file line by line
            data.forEach(function(rows){
                
                //if the age is between 1 and 30 (inclusive) 
                if(rows.age >=1 && rows.age <=30){
                    //current value at index 0 in age array is incremented by 1
                    age[0] = age[0] + 1;
                }
                //if the age is between 31 and 40 (inclusive)
                else if(rows.age >= 31 && rows.age <=40){
                    //current value at index 1 in age array is incremented by 1
                    age[1] = age[1] + 1;
                }
                //if the age is between 41 and 60 (inclusive)
                else if(rows.age >= 41 && rows.age <=60){
                    //current value at index 2 in age array is incremented by 1
                    age[2] = age[2] + 1;
                }
                //if the age is between 61 and 100 (inclusive)
                else if(rows.age >= 61 && rows.age <=100){
                    //current value at index 3 in age array is incremented by 1
                    age[3] = age[3] + 1;
                }

            })

            var p = d3.select("body")
                   .selectAll("p") 
                   .data(age) 
                   .enter()
                    .append("p")
                    //displays the values of the age array
                    .text(function (d, j) { 
                        if(j==0){
                            return "age(1-30) = " +d;
                        } 
                        else if(j==1){
                            return "age(31-40) = " +d;
                        }
                        else if(j==2){
                            return "age(41-60) = " +d;
                        }
                        else{
                            return "age(61-100) = " +d;
                        }
                    });

        });
         
    </script> 
</body> 
</html> 